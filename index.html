<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estandarizador de Actividades | Canvas LMS</title>
    <!-- SEO & Metadata -->
    <meta name="description"
        content="Aplicación web para estandarizar actividades en Canvas LMS y generar documentos Word (.docx).">

    <link rel="stylesheet" href="style.css">

    <!-- Google Fonts: Inter and Lato para diseño premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <div class="header-left">
                <div class="logo">
                    <svg width="36" height="36" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="100" cy="100" r="100" fill="#FFFFFF" />
                        <path d="M100 40 L160 160 L40 160 Z" fill="#003087" />
                    </svg>
                </div>
                <h1>Estandarizador de Actividades</h1>
            </div>
            <img src="logo-sied.png" alt="UCC SIED" class="sied-logo"
                title="Recuerda guardar la imagen como 'logo-sied.png' en esta carpeta.">
        </header>

        <main class="main-layout">
            <aside class="sidebar">
                <h2>Actividades</h2>
                <div id="activitiesList" class="activities-list">
                    <p class="empty-msg" style="color:#5C666F; font-size: 0.95rem;">No hay actividades guardadas.</p>
                </div>
                <button type="button" id="downloadAllBtn" class="primary-btn submit-btn"
                    style="display:none; margin-top:1.5rem; width:100%; font-size: 1rem; padding: 0.8rem;">Descargar
                    Todas (.docx)</button>
            </aside>
            <div class="content">
                <div id="selectionScreen">
                    <style>
                        .selection-header {
                            text-align: center;
                            margin-bottom: 4rem;
                            padding: 2rem 0;
                            position: relative;
                        }

                        .selection-header::after {
                            content: '';
                            position: absolute;
                            bottom: 0;
                            left: 50%;
                            transform: translateX(-50%);
                            width: 60px;
                            height: 4px;
                            background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6);
                            border-radius: 2px;
                        }

                        .selection-header h2 {
                            font-size: 2.8rem;
                            color: var(--primary-color);
                            margin-bottom: 0.8rem;
                            font-family: 'Lato', sans-serif;
                            font-weight: 800;
                            letter-spacing: -1px;
                        }

                        .selection-header p {
                            font-size: 1.2rem;
                            color: #8A94A6;
                            max-width: 600px;
                            margin: 0 auto;
                            font-weight: 500;
                        }

                        .premium-cards-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                            gap: 1.5rem;
                            padding: 0 1rem 1rem 1rem;
                            max-width: 900px;
                            margin: 0 auto;
                        }

                        .premium-type-card {
                            background: #ffffff;
                            border: none;
                            border-radius: 20px;
                            padding: 2rem 1rem;
                            text-align: center;
                            cursor: pointer;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            gap: 1.2rem;
                            position: relative;
                            z-index: 1;
                            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.04);
                            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        }

                        .premium-type-card::before {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            border-radius: 24px;
                            padding: 2px;
                            background: linear-gradient(135deg, rgba(226, 230, 233, 1) 0%, rgba(226, 230, 233, 0.3) 100%);
                            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                            -webkit-mask-composite: xor;
                            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                            mask-composite: exclude;
                            z-index: -1;
                            transition: all 0.4s ease;
                        }

                        .premium-type-card:hover {
                            transform: translateY(-12px);
                            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.08);
                        }

                        .premium-type-card:hover::before {
                            background: var(--card-gradient);
                        }

                        .premium-card-icon {
                            width: 65px;
                            height: 65px;
                            border-radius: 20px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            color: white;
                            transform: rotate(-5deg);
                            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                            position: relative;
                        }

                        .premium-card-icon::after {
                            content: '';
                            position: absolute;
                            top: 100%;
                            left: 50%;
                            transform: translateX(-50%);
                            width: 50%;
                            height: 15px;
                            background: inherit;
                            filter: blur(15px);
                            opacity: 0.4;
                            z-index: -1;
                            border-radius: 50%;
                        }

                        .premium-type-card:hover .premium-card-icon {
                            transform: rotate(0deg) scale(1.1);
                        }

                        .premium-type-card h3 {
                            font-size: 1.3rem;
                            font-weight: 800;
                            color: #2D3B45;
                            margin: 0;
                            transition: color 0.3s ease;
                        }

                        /* Card specific styles */
                        .card-foro {
                            --card-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        }

                        .card-foro .premium-card-icon {
                            background: var(--card-gradient);
                        }

                        .card-foro:hover h3 {
                            color: #059669;
                        }

                        .card-tarea {
                            --card-gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                        }

                        .card-tarea .premium-card-icon {
                            background: var(--card-gradient);
                            transform: rotate(0deg);
                        }

                        .card-tarea:hover h3 {
                            color: #2563eb;
                        }

                        .card-evaluacion {
                            --card-gradient: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
                        }

                        .card-evaluacion .premium-card-icon {
                            background: var(--card-gradient);
                            transform: rotate(5deg);
                        }

                        .card-evaluacion:hover h3 {
                            color: #6d28d9;
                        }
                    </style>

                    <div class="selection-header">
                        <h2>¿Qué deseas crear hoy?</h2>
                        <p>Selecciona el tipo de componente que necesitas diseñar para tu curso en Canvas LMS.</p>
                    </div>

                    <div class="flex-container premium-cards-grid">
                        <div class="type-card premium-type-card card-foro" data-type="foro">
                            <div class="premium-card-icon">
                                <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path
                                        d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                    </path>
                                </svg>
                            </div>
                            <h3>Foros</h3>
                        </div>

                        <div class="type-card premium-type-card card-tarea" data-type="tarea">
                            <div class="premium-card-icon">
                                <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                            </div>
                            <h3>Tareas</h3>
                        </div>

                        <div class="type-card premium-type-card card-evaluacion" data-type="evaluacion">
                            <div class="premium-card-icon">
                                <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                            </div>
                            <h3>Evaluaciones</h3>
                        </div>
                    </div>
                </div>

                <div id="formScreen" style="display: none; padding: 0 1rem;">
                    <button type="button" class="back-btn" id="backBtn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        Volver
                    </button>
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px;">
                        <div>
                            <h2 id="formTitle" class="form-title" style="margin-bottom: 5px;">Generar Tarea</h2>
                            <p class="intro-text" style="margin-bottom: 0;">Completa este formulario para generar un
                                documento Word estandarizado.</p>
                        </div>
                    </div>

                    <form id="activityForm">
                        <input type="hidden" id="activityType" value="tarea">

                        <div class="form-group" style="display:flex; gap:16px;">
                            <div style="flex:1;">
                                <label for="category">Categoría <span class="required">*</span></label>
                                <select id="category" required>
                                    <option value="" disabled selected>Seleccionar...</option>
                                </select>
                            </div>
                            <div style="flex:1;">
                                <label for="module">Módulo <span class="required">*</span></label>
                                <input type="number" id="module" placeholder="Ej: 1" min="1" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="title">Título de la actividad <span class="required">*</span></label>
                            <input type="text" id="title" required
                                placeholder="Ej: Actividad obligatoria M1 - Trabajo final">
                        </div>

                        <div class="form-group">
                            <label for="consigna">Consigna <span class="required">*</span></label>
                            <textarea id="consigna" required rows="4"
                                placeholder="Desarrollo principal de la actividad..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="objectives">Objetivos <span class="required">*</span></label>
                            <textarea id="objectives" required rows="4"
                                placeholder="¿Qué se espera que logre el estudiante?"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="guidelines" id="guidelinesLabel">Pautas de presentación <span
                                    class="required">*</span></label>
                            <textarea id="guidelines" required rows="4" placeholder="..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="criteria" id="criteriaLabel">Criterios de evaluación <span
                                    class="required">*</span></label>
                            <textarea id="criteria" required rows="4" placeholder="..."></textarea>
                        </div>

                        <div id="questionsSection" style="display: none; margin-top: 2rem;">
                            <h3>Preguntas de la Evaluación (New Quizzes)</h3>
                            <p class="group-hint">Agrega aquí las preguntas que componen tu evaluación.</p>
                            <div id="questionsList"></div>
                            <div class="add-question-wrapper">
                                <select id="newQuestionType">
                                    <option value="carga-archivo">Carga del archivo</option>
                                    <option value="categorizacion">Categorización</option>
                                    <option value="coincidencia">Coincidencia</option>
                                    <option value="ensayo">Ensayo</option>
                                    <option value="formula">Fórmula</option>
                                    <option value="numerica">Numérico</option>
                                    <option value="opcion-multiple">Opción múltiple</option>
                                    <option value="ordenamiento">Ordenar</option>
                                    <option value="completar-espacio">Rellenar el espacio en blanco</option>
                                    <option value="respuestas-multiples">Respuesta múltiple</option>
                                    <option value="verdadero-falso">Verdadero o falso</option>
                                    <option value="zona-activa">Zona activa</option>
                                    <option value="estimulo">Estímulo</option>
                                    <option value="bloque-texto">Bloque de texto</option>
                                </select>
                                <button type="button" id="addQuestionBtn" class="secondary-btn">Agregar
                                    Pregunta</button>
                            </div>
                        </div>

                        <div class="form-group checkbox-group" id="groupCheckboxContainer">
                            <label class="checkbox-container">
                                <input type="checkbox" id="isGroup">
                                <div class="custom-checkbox"></div>
                                <span class="checkbox-text">¿Es una actividad grupal?</span>
                            </label>
                        </div>

                        <div class="form-group group-field" id="groupInstructionsField" style="display: none;">
                            <label>Indicaciones de registro en grupos que se incluirán:</label>
                            <div class="group-hint">Este recuadro se agregará en el aula virtual
                                para
                                que los alumnos sepan cómo unirse al grupo.</div>

                            <div class="group-preview">
                                <div class="preview-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                                    </svg>
                                </div>
                                <div class="preview-content">
                                    <h4>¿Cómo unirte a tu grupo para esta actividad?</h4>
                                    <p>Esta es una <strong>actividad grupal</strong>. Para participar, seguí estos
                                        pasos:
                                    </p>
                                    <ol>
                                        <li>En el menú del curso, hacé clic en "Personas" y luego en la pestaña "Grupos"
                                        </li>
                                        <li>Elegí un grupo con lugar disponible y hacé clic en "Unirse".</li>
                                        <li>Pueden usar el entorno del grupo para comunicarse, organizarse y trabajar en
                                            conjunto.</li>
                                        <li><strong>La entrega se realiza desde esta misma actividad, no desde el
                                                entorno
                                                del
                                                grupo.</strong> Solo una persona del grupo debe entregar</li>
                                    </ol>
                                    <p class="warning-text">⚠️ <strong>Importante:</strong> Si no ves los grupos o tenés
                                        problemas, contactá al docente.</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions" style="display:flex; gap:12px; margin-top:2rem;">
                            <button type="button" id="saveActivityBtn" class="secondary-btn"
                                style="flex:1; padding: 1.15rem; font-size: 1.15rem;">
                                Guardar Actividad
                            </button>
                            <button type="button" id="generateDocxBtn" class="submit-btn" style="flex:1; margin-top:0;">
                                <svg width="22" height="22" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                    </path>
                                </svg>
                                <span>Descargar Word (.docx)</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="previewContent"></div>
        </div>
    </div>



    <script src="app.js"></script>
</body>

</html>